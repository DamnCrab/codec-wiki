---
sidebar_position: 5
---

# 心理视觉优化

:::info 维护中
本条目内容尚未完善，正在持续补充中。
:::

## 定义

"心理视觉保真度"是视频编码领域的常用术语，用于描述人类视觉系统感知的编码视频质量。该概念有以下同义表述：
- "感知质量"
- "主观质量"
- "视觉质量"

心理视觉优化参数的引入是为了克服传统视频编码决策机制的局限性——传统方法往往优先考虑[PSNR](../metrics/PSNR.mdx)等简单指标衡量的编码效率。

编码器对心理视觉保真度的重视程度往往反映其成熟度，这也是[x264](../encoders/x264.mdx)和[x265](../encoders/x265.mdx)等成熟编码器被公认为设计精良、效果出众的重要原因。

## 原理说明

根据[x265官方文档](https://x265.readthedocs.io/en/master/cli.html#psycho-visual-options)的解释：

> 视频编码器默认会基于简单的率失真公式进行模式决策，在失真度与比特率之间进行权衡。这种方式总体有效，但其失真度量方式存在局限——算法往往倾向于选择模糊的重建块而非运动矢量错误的块。而人眼通常更接受错误运动而非模糊，因此x265提供了心理视觉调整参数来优化率失真算法。

理解心理视觉保真度的核心在于"视觉能量"概念。虽然前文指出人眼更容忍错误运动而非模糊，类似原理也适用于细节保留场景。由于人类视觉对能量信息的偏好，相较于模糊区域，人眼对存在细节（即便是错误的细节）的区域更具包容性。心理视觉优化参数通常就是为保持编码视频中的视觉能量而设计。

### 保真度与观感度

引用[Cloudinary博客](https://cloudinary.com/blog/what_to_focus_on_in_image_compression_fidelity_or_appeal)的观点：

> 图像保真度强调对原始内容的视觉保留；观感度则关注压缩伪影的隐蔽性。根据优先级不同，可采用任一方式进行图像压缩，在减小文件大小的同时保持合理的视觉"质量"...

许多用户反馈更接受视频模糊而非块状伪影，这实际上混淆了保真度与观感度的价值判断。虽然在低码率下模糊处理有助于减轻块状伪影的可见性，但观看者通常更倾向于接受轻微模糊的画面，而非存在干扰性伪影的块状画面。这凸显了编码器中心理视觉参数平衡的重要性——过度使用这些参数可能在某些场景（如低质量编码时）产生干扰性伪影，反而会损害视觉质量。

### 心理视觉参数

以下是x265文档中列出的常见心理视觉优化参数：

> `--psy-rd`会对与源块视觉能量不匹配的重建块施加额外代价。该参数值越高，算法就越倾向于保持能量一致性而非模糊处理，同时会更激进地忽略率失真优化。若设置过高，可能引入视觉伪影并导致比特率上升，迫使码率控制全局提高量化参数，反而降低整体质量。该参数通常会减少DC/Planar帧内预测和双向帧间预测等模糊预测模式的使用。

> `--psy-rdoq`会调整RDO量化（通过`--rdoq-level`1或2启用）使用的失真代价计算，倾向于保持重建图像的视觉能量。该参数可防止RDOQ过度模糊编码选项。在低强度时主要影响量化级决策，保持重建图像中的高频能量；随着强度提高，会增加非零系数量化级，减少RDOQ率失真分析的归零操作。过高设置可能使比特率翻倍，导致全局QP上升并产生振铃效应。相比`--psy-rd`针对源图像能量的精准优化，`--psy-rdoq`更侧重能量保持的通用策略，但极高值有时可能产生意外收益。

简言之，`--psy-rd`致力于保持编码视频相对于源视频的视觉能量，而`--psy-rdoq`则在决策中普遍倾向于保留视觉能量。

目前[x264](../encoders/x264.mdx)除了包含上述参数外，还具备多项心理视觉优化选项，被视为心理视觉优化最成熟的开源视频编码器。虽然不支持`--psy-rdoq`，但[SVT-AV1-PSY](../encoders/SVT-AV1-PSY.mdx)作为AV1编码器（自3.0.0版本起支持`--psy-rd`）也提供了系列心理视觉优化参数。

### 评估指标

当前缺乏客观方法评估编码器心理视觉优化的有效性，必须依赖主观视觉测试。虽然[VMAF](../metrics/VMAF.mdx)和[SSIM](../metrics/SSIM.mdx)等指标设计上比PSNR更具感知准确性，但其测量结果仍远非完美且常具误导性。

[SSIMULACRA2](../metrics/SSIMULACRA2.mdx)和[XPSNR](../metrics/XPSNR.mdx)等现代指标追求更高的感知准确性——虽然SSIMULACRA2基本实现了这一目标，但新指标仍不完美，常常错误地建议禁用所有心理视觉参数，即便这些参数明显有助于保持心理视觉保真度。

## 结论

心理视觉优化参数对保持视觉质量至关重要。虽然感知驱动的功能开发难度大、测试复杂、测量困难且相对罕见，但它们通常能显著提升编码效果。优秀心理视觉优化方案的存在往往标志着编码器的成熟与高效，这也解释了为何x264/x265等长期重视视觉质量的编码器能获得压倒性的积极评价。