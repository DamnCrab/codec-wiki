"use strict";(self.webpackChunkcodec_wiki=self.webpackChunkcodec_wiki||[]).push([[5147],{2464:(e,n,i)=>{i.d(n,{A:()=>j});var t=i(6540),a=i(4164),r=i(52),s=i(6347),o=i(5793),l=i(9025),c=i(4430),d=i(4148);function u(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:i}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:i,attributes:t,default:a}}=e;return{value:n,label:i,attributes:t,default:a}}))}(i);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,i])}function p(e){let{value:n,tabValues:i}=e;return i.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:i}=e;const a=(0,s.W6)(),r=function(e){let{queryString:n=!1,groupId:i}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!i)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return i??null}({queryString:n,groupId:i});return[(0,l.aZ)(r),(0,t.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(a.location.search);n.set(r,e),a.replace({...a.location,search:n.toString()})}),[r,a])]}function f(e){const{defaultValue:n,queryString:i=!1,groupId:a}=e,r=h(e),[s,l]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:i}=e;if(0===i.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:i}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${i.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=i.find((e=>e.default))??i[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:r}))),[c,u]=m({queryString:i,groupId:a}),[f,g]=function(e){let{groupId:n}=e;const i=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,r]=(0,d.Dv)(i);return[a,(0,t.useCallback)((e=>{i&&r.set(e)}),[i,r])]}({groupId:a}),b=(()=>{const e=c??f;return p({value:e,tabValues:r})?e:null})();(0,o.A)((()=>{b&&l(b)}),[b]);return{selectedValue:s,selectValue:(0,t.useCallback)((e=>{if(!p({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),g(e)}),[u,g,r]),tabValues:r}}var g=i(5251);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=i(4848);function x(e){let{className:n,block:i,selectedValue:t,selectValue:s,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,r.a_)(),d=e=>{const n=e.currentTarget,i=l.indexOf(n),a=o[i].value;a!==t&&(c(n),s(a))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const i=l.indexOf(e.currentTarget)+1;n=l[i]??l[0];break}case"ArrowLeft":{const i=l.indexOf(e.currentTarget)-1;n=l[i]??l[l.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":i},n),children:o.map((e=>{let{value:n,label:i,attributes:r}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>{l.push(e)},onKeyDown:u,onClick:d,...r,className:(0,a.A)("tabs__item",b.tabItem,r?.className,{"tabs__item--active":t===n}),children:i??n},n)}))})}function S(e){let{lazy:n,children:i,selectedValue:r}=e;const s=(Array.isArray(i)?i:[i]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===r));return e?(0,t.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function V(e){const n=f(e);return(0,v.jsxs)("div",{className:(0,a.A)("tabs-container",b.tabList),children:[(0,v.jsx)(x,{...n,...e}),(0,v.jsx)(S,{...n,...e})]})}function j(e){const n=(0,g.A)();return(0,v.jsx)(V,{...e,children:u(e.children)},String(n))}},4345:(e,n,i)=>{i.d(n,{A:()=>s});i(6540);var t=i(4164);const a={tabItem:"tabItem_Ymn6"};var r=i(4848);function s(e){let{children:n,hidden:i,className:s}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,t.A)(a.tabItem,s),hidden:i,children:n})}},7064:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"encoders/SVT-AV1-PSY","title":"SVT-AV1-PSY","description":"This entry is about a fork of SVT-AV1 called SVT-AV1-PSY. If you\'d like to learn about the mainline SVT-AV1 encoder before reading, visit our SVT-AV1 wiki entry.","source":"@site/docs/encoders/SVT-AV1-PSY.mdx","sourceDirName":"encoders","slug":"/encoders/SVT-AV1-PSY","permalink":"/docs/encoders/SVT-AV1-PSY","draft":false,"unlisted":false,"editUrl":"https://github.com/av1-community-contributors/codec-wiki/tree/main/docs/encoders/SVT-AV1-PSY.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"SVT-AV1-PSY","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"aomenc","permalink":"/docs/encoders/aomenc"},"next":{"title":"SVT-AV1","permalink":"/docs/encoders/SVT-AV1"}}');var a=i(4848),r=i(8453),s=i(2464),o=i(4345);const l={title:"SVT-AV1-PSY",sidebar_position:5},c="SVT-AV1-PSY",d={},u=[{value:"Micro-Release Framework",id:"micro-release-framework",level:2},{value:"Feature Additions",id:"feature-additions",level:2},{value:"Installation",id:"installation",level:2},{value:"Projects Featuring SVT-AV1-PSY",id:"projects-featuring-svt-av1-psy",level:2},{value:"License",id:"license",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"svt-av1-psy",children:"SVT-AV1-PSY"})}),"\n",(0,a.jsx)(n.admonition,{title:"Community Fork",type:"info",children:(0,a.jsxs)(n.p,{children:["This entry is about a fork of SVT-AV1 called SVT-AV1-PSY. If you'd like to learn about the mainline SVT-AV1 encoder before reading, visit our ",(0,a.jsx)(n.a,{href:"/docs/encoders/SVT-AV1",children:"SVT-AV1 wiki entry"}),"."]})}),"\n",(0,a.jsxs)(n.p,{children:["SVT-AV1-PSY is a project that aims to enhance the Scalable Video Technology for AV1 Encoder with perceptual enhancements for psychovisually optimal AV1 encoding. The ultimate goal is to create the best encoding implementation for perceptual quality with AV1. The development of this project involves a collaborative effort from a team of dedicated developers and contributors who are committed to improving the encoder's ",(0,a.jsx)(n.a,{href:"/docs/introduction/psychovisual",children:"psychovisual"})," quality."]}),"\n",(0,a.jsxs)(n.p,{children:["The SVT-AV1-PSY project is maintained by ",(0,a.jsx)(n.a,{href:"https://github.com/gianni-rosato",children:"Gianni Rosato"}),", ",(0,a.jsx)(n.a,{href:"https://github.com/juliobbv",children:"Julio Barba"}),", & ",(0,a.jsx)(n.a,{href:"https://github.com/Clybius",children:"Clybius"}),", as well as a number of community contributors including ",(0,a.jsx)(n.a,{href:"https://github.com/BlueSwordM",children:"BlueSwordM"}),", the maintainer of the ",(0,a.jsx)(n.a,{href:"https://aur.archlinux.org/packages/svt-av1-psy-git",children:"SVT-AV1-PSY AUR package"})," & the original author of ",(0,a.jsx)(n.a,{href:"https://github.com/BlueSwordM/aom-av1-psy",children:"aom-av1-psy"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["The development process involves community testing and optimization to ensure that the encoder and decoder deliver optimal performance. The team uses a variety of tools and methodologies to analyze and improve the performance of the encoder and decoder, including subjective analyses. ",(0,a.jsx)(n.a,{href:"/docs/metrics/SSIMULACRA2",children:"SSIMULACRA2"})," and ",(0,a.jsx)(n.a,{href:"/docs/metrics/XPSNR",children:"XPSNR"})," are used extensively for metrics testing, and the team is committed to improving the overall quality and performance of the encoder using these two metrics as general guidelines and benchmarks. However, the stated goal is not to improve metric scores but to improve the overall perceptual quality of the encoder; naturally, changes are often made to SVT-AV1-PSY that end up degrading metric performance in favor of perceptual fidelity per bit."]}),"\n",(0,a.jsxs)(n.p,{children:["If you are interested in reading more about the project, you can visit ",(0,a.jsx)(n.a,{href:"https://svt-av1-psy.com/",children:"the project's website"})," for more information."]}),"\n",(0,a.jsx)(n.p,{children:"SVT-AV1-PSY contributors are not in any way affiliated with the Alliance for Open Media or any upstream SVT-AV1 project contributors who have not also contributed to the SVT-AV1-PSY project."}),"\n",(0,a.jsx)(n.h2,{id:"micro-release-framework",children:"Micro-Release Framework"}),"\n",(0,a.jsx)(n.p,{children:"SVT-AV1-PSY features additions outside of mainline SVT-AV1 that are often considered to be significant, but don't line up with a major mainline release. Therefore, the SVT-AV1-PSY release framework is different, and the encoder is currently being developed around micro-releases to make this clear."}),"\n",(0,a.jsxs)(n.p,{children:["Micro-releases are tagged with letters starting at ",(0,a.jsx)(n.code,{children:"A"})," to indicate that they contain significant new features and aren't equivalent to mainline releases; for example, ",(0,a.jsx)(n.code,{children:"v2.0.0-A"})," was a micro-release with significant new features exclusive to SVT-AV1-PSY that followed the prior ",(0,a.jsx)(n.code,{children:"v2.0.0"})," release (which came out with PSY + mainline features in tandem with mainline ",(0,a.jsx)(n.code,{children:"v2.0.0"}),"). Releases without letters are in-line with mainline SVT-AV1 releases, and may contain significant PSY feature additions as well."]}),"\n",(0,a.jsx)(n.h2,{id:"feature-additions",children:"Feature Additions"}),"\n",(0,a.jsx)(n.p,{children:"SVT-AV1-PSY includes a number of new features that are not present in mainline SVT-AV1. These features are designed to improve the visual quality of AV1 encodes, and offer more flexibility when configuring the encoder for a wide range of encoding scenarios. Many of these changes are being integrated into mainline SVT-AV1 as the project matures."}),"\n",(0,a.jsxs)(n.p,{children:["The full suite of changes can be found in the ",(0,a.jsx)(n.a,{href:"https://github.com/gianni-rosato/svt-av1-psy/blob/master/README.md",children:"SVT-AV1-PSY README"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,a.jsx)(n.p,{children:"Building & installing SVT-AV1-PSY is the same as building & installing mainline SVT-AV1."}),"\n",(0,a.jsxs)(s.A,{children:[(0,a.jsxs)(o.A,{value:"unixlike",label:"Linux & macOS",children:[(0,a.jsx)(n.p,{children:(0,a.jsxs)(n.em,{children:["A precompiled AVX2-optimized binary of SVT-AV1-PSY can be installed for x86_64 Linux via ",(0,a.jsx)(n.a,{href:"/docs/utilities/rav1ator-cli",children:"rAV1ator CLI"}),". However, it is always recommended to build from source."]})}),(0,a.jsx)(n.p,{children:"To build SVT-AV1 from source, first clone the desired SVT-AV1 repository & enter the build directory."}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",metastring:'title="Clone SVT-AV1-PSY"',children:"git clone https://github.com/gianni-rosato/svt-av1-psy\ncd svt-av1-psy/Build/linux\n"})}),(0,a.jsxs)(n.p,{children:["In the directory, simply run ",(0,a.jsx)(n.code,{children:"./build.sh [flags]"})," to build. Be aware that building requires CMake version 3.16 or higher and either GCC or Clang. It is recommended to use Clang."]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",metastring:'title="Build release"',children:"./build.sh release\n"})}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",metastring:'title="Statically build just the encoder with clang and enable link-time optimization"',children:"./build.sh jobs=8 all cc=clang cxx=clang++ no-dec enable-lto static native\n"})}),(0,a.jsxs)(n.p,{children:["The compiled binaries will be in the ",(0,a.jsx)(n.code,{children:"Bin/Release"})," directory, including SvtAv1EncApp. If you just want the encoder, adding the ",(0,a.jsx)(n.code,{children:"no-dec"})," flag will skip building SvtAv1DecApp and save on compilation time."]}),(0,a.jsxs)(n.p,{children:["If you want extra performance, it is possible to build SVT-AV1 using PGO (Profile-guided Optimization). ",(0,a.jsxs)(n.strong,{children:["Be aware that this particular script infers that you have a .y4m file (or multiple) in ",(0,a.jsx)(n.code,{children:"/dev/shm"})," for transcoding"]}),". You can compile statically linked SVT-AV1 with PGO (and LTO, or link-time optimization) by following this script:"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",metastring:'title="Bulding SVT-AV1 with profile guided optimization"',children:"git clone https://gitlab.com/AOMediaCodec/SVT-AV1/\ncd SVT-AV1/Build/linux\n./build.sh cc=gcc cxx=g++ enable-lto enable-pgo static native jobs=$(nproc) pgo-dir=/dev/shm pgo-videos=/dev/shm release\n"})}),(0,a.jsx)(n.p,{children:"If you wish to store videos elsewhere or provide custom parameters to the SvtAv1EncApp binary, try this script:"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"git clone https://gitlab.com/AOMediaCodec/SVT-AV1/\ncd SVT-AV1/Build/linux\n./build.sh cc=gcc cxx=g++ enable-lto enable-pgo static native jobs=$(nproc) pgo-dir=/dev/shm pgo-compile-gen release\n../../Bin/Release/SvtAv1EncApp # Run this binary as many times as you'd like with arguments of your choice to collect data\n./build.sh cc=gcc cxx=g++ enable-lto enable-pgo static native jobs=$(nproc) pgo-dir=/dev/shm pgo-compile-use release\n"})})]}),(0,a.jsxs)(o.A,{value:"windows",label:"Windows",children:[(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"MSYS2"})," is the best option for building in Windows, as it provides a Unix-like environment for building SVT-AV1-PSY. This makes the compilation procedure the same as described for Linux & macOS. The full build process is detailed here."]}),(0,a.jsxs)(n.ol,{start:"0",children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Make sure you have downloaded & installed MSYS2 from ",(0,a.jsx)(n.a,{href:"https://www.msys2.org/",children:"the MSYS2 website"})," before beginning the build process."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Start the UCRT64 console & install the required dependencies:"}),"\n"]}),"\n"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pacman -Syu --needed git mingw-w64-ucrt-x86_64-toolchain mingw-w64-ucrt-x86_64-cmake mingw-w64-ucrt-x86_64-ninja mingw-w64-ucrt-x86_64-yasm\n"})}),(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"[Optional] Clang is the recommended compiler for SVT-AV1 & SVT-AV1-PSY, so you may wish to download it with the following command:"}),"\n"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pacman -Syu --needed mingw-w64-ucrt-x86_64-clang\n"})}),(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsxs)(n.li,{children:["Now, we may follow the steps for Linux & macOS to complete building. Please note that CMake may require you to include ",(0,a.jsx)(n.code,{children:'-G "Ninja"'})," in any CMake commands."]}),"\n"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",metastring:'title="Clone SVT-AV1-PSY"',children:"git clone https://github.com/gianni-rosato/svt-av1-psy\ncd SVT-AV1/Build/linux\n"})}),(0,a.jsxs)(n.p,{children:["In the directory, simply run ",(0,a.jsx)(n.code,{children:"./build.sh [flags]"})," to build. Be aware that building requires CMake version 3.16 or higher and either GCC or Clang. It is recommended to use Clang, and ideally it will be installed as per Step 2."]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",metastring:'title="Build release"',children:"./build.sh release\n"})}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",metastring:'title="Statically build just the encoder with clang and enable link-time optimization"',children:"./build.sh jobs=8 all cc=clang cxx=clang++ no-dec enable-lto static native\n"})}),(0,a.jsxs)(n.p,{children:["The compiled binaries will be in the ",(0,a.jsx)(n.code,{children:"Bin/Release"})," directory, including SvtAv1EncApp. If you just want the encoder, adding the ",(0,a.jsx)(n.code,{children:"no-dec"})," flag will skip building SvtAv1DecApp and save on compilation time."]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"projects-featuring-svt-av1-psy",children:"Projects Featuring SVT-AV1-PSY"}),"\n",(0,a.jsx)(n.p,{children:"Some projects that feature SVT-AV1-PSY include:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/docs/utilities/Aviator",children:"Aviator"})," ~ an AV1 encoding GUI by @gianni-rosato"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/docs/utilities/rav1ator-cli",children:"rAV1ator CLI"})," ~ a TUI for video encoding with Av1an by @gianni-rosato"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://aur.archlinux.org/packages/svt-av1-psy-git",children:"SVT-AV1-PSY on the AUR"})," ~ by @BlueSwordM"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/CachyOS/CachyOS-PKGBUILDS/pull/144",children:"SVT-AV1-PSY in CachyOS"})," ~ by @BlueSwordM"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/vincejv/docker-handbrake",children:"Custom Handbrake Builds"})," ~ by @vincejv"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/staxrip/staxrip",children:"Staxrip"})," ~ a video & audio encoding GUI for Windows by @Dendraspis"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,a.jsx)(n.p,{children:"Up to v0.8.7, SVT-AV1 is licensed under the BSD-2-clause license and the\nAlliance for Open Media Patent License 1.0. Starting from v0.9, SVT-AV1 is licensed\nunder the BSD-3-clause clear license and the Alliance for Open Media Patent\nLicense 1.0."}),"\n",(0,a.jsx)(n.p,{children:"SVT-AV1-PSY does not feature license modifications from mainline SVT-AV1."})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>o});var t=i(6540);const a={},r=t.createContext(a);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);